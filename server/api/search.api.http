### Search API Test Requests
### RESTful API endpoints following RESTful standards
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. Note: Search endpoints are public (no authentication required)
### 3. POST /api/search requires authentication to save search logs

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@sessionCookie = your-session-cookie-here

###############################################
### SEARCH RESOURCE
###############################################

### GET /api/search
### Search hotels by location and availability
### Query params: location, adults, children, checkInDate, checkOutDate, rooms, numberOfDays (optional)
GET {{baseUrl}}/api/search?location=New York&adults=2&children=0&checkInDate=2024-12-01&checkOutDate=2024-12-05&rooms=1&numberOfDays=4
Content-Type: {{contentType}}

###

### GET /api/search (Without numberOfDays)
### Search hotels without numberOfDays (will be calculated automatically)
GET {{baseUrl}}/api/search?location=Paris&adults=2&children=1&checkInDate=2024-12-10&checkOutDate=2024-12-15&rooms=1
Content-Type: {{contentType}}

###

### GET /api/search (Invalid - missing required fields)
### Should return 400 Bad Request
GET {{baseUrl}}/api/search?location=New York
Content-Type: {{contentType}}

###

### GET /api/search (Invalid - invalid date range)
### Should return 400 Bad Request (checkOutDate must be after checkInDate)
GET {{baseUrl}}/api/search?location=New York&adults=2&children=0&checkInDate=2024-12-05&checkOutDate=2024-12-01&rooms=1&numberOfDays=4
Content-Type: {{contentType}}

###

### GET /api/search (Invalid - numberOfDays mismatch)
### Should return 400 Bad Request (numberOfDays must match date difference)
GET {{baseUrl}}/api/search?location=New York&adults=2&children=0&checkInDate=2024-12-01&checkOutDate=2024-12-05&rooms=1&numberOfDays=10
Content-Type: {{contentType}}

###

### POST /api/search
### Save search information to search logs
### Note: Requires authentication
POST {{baseUrl}}/api/search
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "searchData": {
    "location": "New York",
    "checkInDate": "2024-12-01",
    "checkOutDate": "2024-12-05",
    "adults": 2,
    "children": 0,
    "rooms": 1,
    "numberOfDays": 4
  }
}

###

### POST /api/search (Flat structure - backward compatibility)
### Save search information using flat structure
POST {{baseUrl}}/api/search
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "location": "Paris",
  "checkInDate": "2024-12-10",
  "checkOutDate": "2024-12-15",
  "adults": 2,
  "children": 1,
  "rooms": 1,
  "numberOfDays": 5
}

###

### POST /api/search (Invalid - missing required fields)
### Should return 400 Bad Request
POST {{baseUrl}}/api/search
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "searchData": {
    "location": "New York"
  }
}

###

### POST /api/search (Invalid - invalid date range)
### Should return 400 Bad Request (checkOutDate must be after checkInDate)
POST {{baseUrl}}/api/search
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "searchData": {
    "location": "New York",
    "checkInDate": "2024-12-05",
    "checkOutDate": "2024-12-01",
    "adults": 2,
    "children": 0,
    "rooms": 1,
    "numberOfDays": 4
  }
}

###

### POST /api/search (Invalid - numberOfDays mismatch)
### Should return 400 Bad Request (numberOfDays must match date difference)
POST {{baseUrl}}/api/search
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "searchData": {
    "location": "New York",
    "checkInDate": "2024-12-01",
    "checkOutDate": "2024-12-05",
    "adults": 2,
    "children": 0,
    "rooms": 1,
    "numberOfDays": 10
  }
}

###

###############################################
### AUTHENTICATION TEST
###############################################

### GET /api/search (Public - no authentication required)
### This endpoint is public and should work without authentication
GET {{baseUrl}}/api/search?location=New York&adults=2&children=0&checkInDate=2024-12-01&checkOutDate=2024-12-05&rooms=1&numberOfDays=4
Content-Type: {{contentType}}

###

### POST /api/search (Unauthenticated)
### Should return 401 Unauthorized if not authenticated (for saving search logs)
POST {{baseUrl}}/api/search
Content-Type: {{contentType}}

{
  "searchData": {
    "location": "New York",
    "checkInDate": "2024-12-01",
    "checkOutDate": "2024-12-05",
    "adults": 2,
    "children": 0,
    "rooms": 1,
    "numberOfDays": 4
  }
}

###

###############################################
### ERROR RESPONSE EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": [ ... ]
### }
###
### Expected Error Response Format:
### {
###   "error": {
###     "code": "ERROR_CODE",
###     "message": "Human readable message",
###     "fields": { ... }  // Optional, for validation errors
###   }
### }
