### User API Test Requests
### RESTful API endpoints following RESTful standards
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. You need to be authenticated (session cookie required)
### 3. For authentication, you may need to login first via /api/auth endpoints

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@userId = 1
@hotelId = 1
@sessionCookie = your-session-cookie-here

###############################################
### CURRENT USER RESOURCE
###############################################

### GET /api/user
### Get current user information
GET {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### PATCH /api/user
### Update current user (partial update)
### You can update one or more fields: name, displayName, email, phoneNumber, dateOfBirth, address, nationality, country, gender
PATCH {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "name": "John Doe",
  "displayName": "johndoe",
  "phoneNumber": "+1234567890",
  "address": "123 Main St, City, Country",
  "nationality": "American",
  "country": "United States",
  "gender": "male",
  "dateOfBirth": "1990-01-01"
}

###

### PATCH /api/user (Update only name)
### Example: Update only the name field
PATCH {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "name": "Jane Smith"
}

###

### PATCH /api/user (Update only email)
### Example: Update only the email field
PATCH {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "email": "newemail@example.com"
}

###

### PATCH /api/user (Update multiple fields)
### Example: Update multiple fields at once
PATCH {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "name": "John Updated",
  "phoneNumber": "+9876543210",
  "address": "456 New Street"
}

###

### PATCH /api/user (Invalid - empty body)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

### PATCH /api/user (Invalid - unknown field)
### Should return 400 Bad Request with field errors
PATCH {{baseUrl}}/api/user
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "invalidField": "value"
}

###

###############################################
### PASSWORD RESOURCE
###############################################

### PATCH /api/user/password
### Update user password
PATCH {{baseUrl}}/api/user/password
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "oldPassword": "oldPassword123",
  "newPassword": "newPassword123",
  "confirmNewPassword": "newPassword123"
}

###

### PATCH /api/user/password (Invalid - passwords don't match)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/user/password
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "oldPassword": "oldPassword123",
  "newPassword": "newPassword123",
  "confirmNewPassword": "differentPassword"
}

###

### PATCH /api/user/password (Invalid - missing fields)
### Should return 400 Bad Request with field errors
PATCH {{baseUrl}}/api/user/password
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "oldPassword": "oldPassword123"
}

###

### PATCH /api/user/password (Invalid - wrong old password)
### Should return 401 Unauthorized
PATCH {{baseUrl}}/api/user/password
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "oldPassword": "wrongPassword",
  "newPassword": "newPassword123",
  "confirmNewPassword": "newPassword123"
}

###

###############################################
### AVATAR RESOURCE
###############################################

### PATCH /api/user/avatar
### Update user avatar
### Note: This requires multipart/form-data, not JSON
### In REST Client, use the file path or base64 encoded image
PATCH {{baseUrl}}/api/user/avatar
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Cookie: connect.sid={{sessionCookie}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="avatar"; filename="avatar.jpg"
Content-Type: image/jpeg

< ./public/uploads/users/avatars/default_avatar.png
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### PATCH /api/user/avatar (Invalid - no file)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/user/avatar
Content-Type: multipart/form-data
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### FAVORITE HOTELS RESOURCE
###############################################

### GET /api/user/favorite-hotels
### Get favorite hotels with pagination (default: page=1, limit=20)
GET {{baseUrl}}/api/user/favorite-hotels
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/user/favorite-hotels (With pagination)
### Get favorite hotels with custom pagination
GET {{baseUrl}}/api/user/favorite-hotels?page=1&limit=10
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/user/favorite-hotels (Page 2)
### Get second page of favorite hotels
GET {{baseUrl}}/api/user/favorite-hotels?page=2&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/user/favorite-hotels (Max limit test)
### Test maximum limit (should cap at 100)
GET {{baseUrl}}/api/user/favorite-hotels?page=1&limit=200
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### POST /api/user/favorite-hotels
### Add favorite hotel
POST {{baseUrl}}/api/user/favorite-hotels
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": 1
}

###

### POST /api/user/favorite-hotels (Add another hotel)
### Add another hotel to favorites
POST {{baseUrl}}/api/user/favorite-hotels
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": 2
}

###

### POST /api/user/favorite-hotels (Invalid - missing hotelId)
### Should return 400 Bad Request
POST {{baseUrl}}/api/user/favorite-hotels
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

### POST /api/user/favorite-hotels (Invalid - duplicate)
### Should return 409 Conflict if hotel already in favorites
POST {{baseUrl}}/api/user/favorite-hotels
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": 1
}

###

### GET /api/user/favorite-hotels/:hotelId
### Check if hotel is favorite
GET {{baseUrl}}/api/user/favorite-hotels/1
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/user/favorite-hotels/:hotelId (Check non-favorite)
### Check if hotel is not favorite
GET {{baseUrl}}/api/user/favorite-hotels/999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### DELETE /api/user/favorite-hotels/:hotelId
### Remove favorite hotel
### Note: Returns 204 No Content (no response body)
DELETE {{baseUrl}}/api/user/favorite-hotels/1
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### DELETE /api/user/favorite-hotels/:hotelId (Remove another)
### Remove another favorite hotel
DELETE {{baseUrl}}/api/user/favorite-hotels/2
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### AUTHENTICATION TEST
###############################################

### GET /api/user (Unauthenticated)
### Should return 401 Unauthorized if not authenticated
GET {{baseUrl}}/api/user
Content-Type: {{contentType}}

###

###############################################
### ERROR RESPONSE EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": { ... }
### }
###
### Expected Error Response Format:
### {
###   "error": {
###     "code": "ERROR_CODE",
###     "message": "Human readable message",
###     "fields": { ... }  // Optional, for validation errors
###   }
### }
###
### Expected Pagination Response Format:
### {
###   "data": [ ... ],
###   "meta": {
###     "page": 1,
###     "limit": 20,
###     "total": 0
###   }
### }
