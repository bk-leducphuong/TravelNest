### Join API Test Requests
### RESTful API endpoints following RESTful standards
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. You need to be authenticated as admin/partner (session cookie required)
### 3. For authentication, you may need to login first via /api/auth endpoints

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@hotelId = 1
@roomId = 1
@sessionCookie = your-session-cookie-here

###############################################
### JOIN FORM RESOURCE
###############################################

### POST /api/join
### Submit join form (become a partner)
### Creates or updates hotel, creates room, and initializes room inventory
POST {{baseUrl}}/api/join
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "joinFormData": {
    "hotelName": "Grand Hotel",
    "streetName": "123 Main Street",
    "city": "New York",
    "coordinates": {
      "latitude": 40.7128,
      "longitude": -74.0060
    },
    "rating": 4.5,
    "checkInFrom": "14:00",
    "checkInTo": "18:00",
    "checkOutFrom": "10:00",
    "checkOutTo": "12:00",
    "services": ["WiFi", "Parking", "Breakfast"],
    "roomDetails": {
      "roomType": "Deluxe Room",
      "numberOfGuests": 2,
      "numberOfRooms": 10
    }
  }
}

###

### POST /api/join (Flat structure - backward compatibility)
### Submit join form using flat structure
POST {{baseUrl}}/api/join
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelName": "Grand Hotel",
  "streetName": "123 Main Street",
  "city": "New York",
  "coordinates": {
    "latitude": 40.7128,
    "longitude": -74.0060
  },
  "rating": 4.5,
  "checkInFrom": "14:00",
  "checkInTo": "18:00",
  "checkOutFrom": "10:00",
  "checkOutTo": "12:00",
  "services": ["WiFi", "Parking", "Breakfast"],
  "roomDetails": {
    "roomType": "Deluxe Room",
    "numberOfGuests": 2,
    "numberOfRooms": 10
  }
}

###

### POST /api/join (Invalid - missing required fields)
### Should return 400 Bad Request
POST {{baseUrl}}/api/join
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelName": "Grand Hotel"
}

###

### POST /api/join (Invalid - invalid coordinates)
### Should return 400 Bad Request
POST {{baseUrl}}/api/join
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "joinFormData": {
    "hotelName": "Grand Hotel",
    "streetName": "123 Main Street",
    "city": "New York",
    "coordinates": {
      "latitude": 100,
      "longitude": -200
    },
    "checkInFrom": "14:00",
    "checkInTo": "18:00",
    "checkOutFrom": "10:00",
    "checkOutTo": "12:00",
    "roomDetails": {
      "roomType": "Deluxe Room",
      "numberOfGuests": 2,
      "numberOfRooms": 10
    }
  }
}

###

### POST /api/join (Invalid - invalid time format)
### Should return 400 Bad Request
POST {{baseUrl}}/api/join
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "joinFormData": {
    "hotelName": "Grand Hotel",
    "streetName": "123 Main Street",
    "city": "New York",
    "coordinates": {
      "latitude": 40.7128,
      "longitude": -74.0060
    },
    "checkInFrom": "2:00 PM",
    "checkInTo": "18:00",
    "checkOutFrom": "10:00",
    "checkOutTo": "12:00",
    "roomDetails": {
      "roomType": "Deluxe Room",
      "numberOfGuests": 2,
      "numberOfRooms": 10
    }
  }
}

###

###############################################
### PHOTOS RESOURCE
###############################################

### POST /api/join/photos
### Upload and process hotel/room photos
### Note: This requires multipart/form-data, not JSON
### In REST Client, use the file path or base64 encoded image
POST {{baseUrl}}/api/join/photos
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Cookie: connect.sid={{sessionCookie}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="hotel_id"

{{hotelId}}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="room_id"

{{roomId}}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="hotel1.jpg"
Content-Type: image/jpeg

< ./public/uploads/hotels/hotel1.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="hotel2.jpg"
Content-Type: image/jpeg

< ./public/uploads/hotels/hotel2.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### POST /api/join/photos (Invalid - missing hotel_id)
### Should return 400 Bad Request
POST {{baseUrl}}/api/join/photos
Content-Type: multipart/form-data
Cookie: connect.sid={{sessionCookie}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="room_id"

{{roomId}}
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### POST /api/join/photos (Invalid - missing room_id)
### Should return 400 Bad Request
POST {{baseUrl}}/api/join/photos
Content-Type: multipart/form-data
Cookie: connect.sid={{sessionCookie}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="hotel_id"

{{hotelId}}
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

###############################################
### AUTHENTICATION TEST
###############################################

### POST /api/join (Unauthenticated)
### Should return 401 Unauthorized if not authenticated
POST {{baseUrl}}/api/join
Content-Type: {{contentType}}

{
  "joinFormData": {
    "hotelName": "Grand Hotel",
    "streetName": "123 Main Street",
    "city": "New York",
    "coordinates": {
      "latitude": 40.7128,
      "longitude": -74.0060
    },
    "checkInFrom": "14:00",
    "checkInTo": "18:00",
    "checkOutFrom": "10:00",
    "checkOutTo": "12:00",
    "roomDetails": {
      "roomType": "Deluxe Room",
      "numberOfGuests": 2,
      "numberOfRooms": 10
    }
  }
}

###

###############################################
### ERROR RESPONSE EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": { ... }
### }
###
### Expected Error Response Format:
### {
###   "error": {
###     "code": "ERROR_CODE",
###     "message": "Human readable message",
###     "fields": { ... }  // Optional, for validation errors
###   }
### }
