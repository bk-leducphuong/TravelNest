### Admin Booking API Test Requests
### RESTful API endpoints for admin booking management
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. You need to be authenticated as admin/partner (session cookie required)
### 3. For authentication, login via /api/auth endpoints with partner role

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@hotelId = 1
@bookingId = 1
@sessionCookie = your-session-cookie-here

###############################################
### BOOKINGS RESOURCE
###############################################

### GET /api/admin/bookings
### Get all bookings for a specific hotel with pagination
### Query params: hotelId (required), status (optional), page (default: 1), limit (default: 20)
GET {{baseUrl}}/api/admin/bookings?hotelId={{hotelId}}&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/bookings (With status filter)
### Get bookings filtered by status
GET {{baseUrl}}/api/admin/bookings?hotelId={{hotelId}}&status=confirmed&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/bookings (All statuses)
### Get all bookings including cancelled
GET {{baseUrl}}/api/admin/bookings?hotelId={{hotelId}}&status=cancelled&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/bookings/:bookingId
### Get a specific booking by ID
GET {{baseUrl}}/api/admin/bookings/{{bookingId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/bookings/:bookingId (Invalid - booking not found)
### Should return 404 Not Found
GET {{baseUrl}}/api/admin/bookings/99999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/bookings/:bookingId/booker
### Get booker information for a specific booking
GET {{baseUrl}}/api/admin/bookings/{{bookingId}}/booker
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### PATCH /api/admin/bookings/:bookingId/status
### Update booking status
### Valid statuses: pending, confirmed, checked in, completed, cancelled
PATCH {{baseUrl}}/api/admin/bookings/{{bookingId}}/status
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "status": "confirmed"
}

###

### PATCH /api/admin/bookings/:bookingId/status (Mark as checked in)
### Update booking status to checked in
PATCH {{baseUrl}}/api/admin/bookings/{{bookingId}}/status
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "status": "checked in"
}

###

### PATCH /api/admin/bookings/:bookingId/status (Mark as completed)
### Update booking status to completed
PATCH {{baseUrl}}/api/admin/bookings/{{bookingId}}/status
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "status": "completed"
}

###

### PATCH /api/admin/bookings/:bookingId/status (Cancel booking)
### Cancel a booking
PATCH {{baseUrl}}/api/admin/bookings/{{bookingId}}/status
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "status": "cancelled"
}

###

###############################################
### AUTHENTICATION TEST
###############################################

### GET /api/admin/bookings (Unauthenticated)
### Should return 401 Unauthorized if not authenticated
GET {{baseUrl}}/api/admin/bookings?hotelId={{hotelId}}
Content-Type: {{contentType}}

###

### GET /api/admin/bookings (Unauthorized - not hotel owner)
### Should return 403 Forbidden if not hotel owner
GET {{baseUrl}}/api/admin/bookings?hotelId=99999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### VALIDATION ERROR EXAMPLES
###############################################

### GET /api/admin/bookings (Missing hotelId)
### Should return 400 Bad Request
GET {{baseUrl}}/api/admin/bookings
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### PATCH /api/admin/bookings/:bookingId/status (Invalid status)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/bookings/{{bookingId}}/status
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "status": "invalid_status"
}

###

### PATCH /api/admin/bookings/:bookingId/status (Missing status)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/bookings/{{bookingId}}/status
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

###############################################
### RESPONSE FORMAT EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": {
###     "bookings": [ ... ],
###     "pagination": {
###       "total": 100,
###       "page": 1,
###       "totalPages": 5,
###       "limit": 20
###     }
###   }
### }
###
### Expected Error Response Format:
### {
###   "success": false,
###   "message": "Error description",
###   "code": "ERROR_CODE"
### }
