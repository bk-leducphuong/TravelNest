### Review API Test Requests
### RESTful API endpoints following RESTful standards
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. You need to be authenticated (session cookie required)
### 3. For authentication, you may need to login first via /api/auth endpoints

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@hotelId = 1
@bookingCode = ABC123
@sessionCookie = your-session-cookie-here

###############################################
### REVIEWS RESOURCE
###############################################

### GET /api/reviews
### Get all reviews for authenticated user
GET {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/hotels/:hotelId
### Get reviews for a specific hotel (with pagination)
### Query params: page (default: 1), limit (default: 20)
GET {{baseUrl}}/api/reviews/hotels/{{hotelId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/hotels/:hotelId (With pagination)
### Get hotel reviews with custom pagination
GET {{baseUrl}}/api/reviews/hotels/{{hotelId}}?page=1&limit=10
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/hotels/:hotelId (Page 2)
### Get second page of hotel reviews
GET {{baseUrl}}/api/reviews/hotels/{{hotelId}}?page=2&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/validate
### Validate if user can review a booking
### Query params: bookingCode, hotelId
GET {{baseUrl}}/api/reviews/validate?bookingCode={{bookingCode}}&hotelId={{hotelId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/validate (Invalid - missing bookingCode)
### Should return 400 Bad Request
GET {{baseUrl}}/api/reviews/validate?hotelId={{hotelId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/check
### Check if booking has already been reviewed
### Query params: bookingCode, hotelId
GET {{baseUrl}}/api/reviews/check?bookingCode={{bookingCode}}&hotelId={{hotelId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/reviews/check (Invalid - missing hotelId)
### Should return 400 Bad Request
GET {{baseUrl}}/api/reviews/check?bookingCode={{bookingCode}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### POST /api/reviews
### Create a review
POST {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "rating": 5,
  "comment": "Excellent hotel with great service and amenities!",
  "reviewCriteria": [
    {
      "name": "Cleanliness",
      "value": 5
    },
    {
      "name": "Service",
      "value": 5
    },
    {
      "name": "Location",
      "value": 4
    },
    {
      "name": "Value",
      "value": 5
    }
  ],
  "bookingCode": "{{bookingCode}}"
}

###

### POST /api/reviews (Another example)
### Create another review with different rating
POST {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "rating": 4,
  "comment": "Good hotel overall, but could improve on some aspects.",
  "reviewCriteria": [
    {
      "name": "Cleanliness",
      "value": 4
    },
    {
      "name": "Service",
      "value": 3
    },
    {
      "name": "Location",
      "value": 5
    },
    {
      "name": "Value",
      "value": 4
    }
  ],
  "bookingCode": "{{bookingCode}}"
}

###

### POST /api/reviews (Invalid - missing required fields)
### Should return 400 Bad Request
POST {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "rating": 5
}

###

### POST /api/reviews (Invalid - invalid rating)
### Should return 400 Bad Request (rating must be between 1 and 5)
POST {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "rating": 6,
  "comment": "Test review",
  "reviewCriteria": [
    {
      "name": "Cleanliness",
      "value": 5
    }
  ],
  "bookingCode": "{{bookingCode}}"
}

###

### POST /api/reviews (Invalid - missing reviewCriteria)
### Should return 400 Bad Request (at least one review criteria is required)
POST {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "rating": 5,
  "comment": "Test review",
  "reviewCriteria": [],
  "bookingCode": "{{bookingCode}}"
}

###

### POST /api/reviews (Invalid - invalid criteria value)
### Should return 400 Bad Request (criteria value must be between 1 and 5)
POST {{baseUrl}}/api/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "rating": 5,
  "comment": "Test review",
  "reviewCriteria": [
    {
      "name": "Cleanliness",
      "value": 6
    }
  ],
  "bookingCode": "{{bookingCode}}"
}

###

###############################################
### AUTHENTICATION TEST
###############################################

### GET /api/reviews (Unauthenticated)
### Should return 401 Unauthorized if not authenticated
GET {{baseUrl}}/api/reviews
Content-Type: {{contentType}}

###

###############################################
### ERROR RESPONSE EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": { ... }
### }
###
### Expected Pagination Response Format:
### {
###   "data": [ ... ],
###   "meta": {
###     "page": 1,
###     "limit": 20,
###     "total": 0
###   }
### }
###
### Expected Error Response Format:
### {
###   "error": {
###     "code": "ERROR_CODE",
###     "message": "Human readable message",
###     "fields": { ... }  // Optional, for validation errors
###   }
### }
