### Admin Room API Test Requests
### RESTful API endpoints for admin room management
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. You need to be authenticated as admin/partner (session cookie required)
### 3. For authentication, login via /api/auth endpoints with partner role

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@hotelId = 1
@roomId = 1
@sessionCookie = your-session-cookie-here

###############################################
### ROOMS RESOURCE
###############################################

### GET /api/admin/rooms
### Get all rooms for a specific hotel
### Query params: hotelId (required)
GET {{baseUrl}}/api/admin/rooms?hotelId={{hotelId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/rooms/:roomId
### Get a specific room by ID
GET {{baseUrl}}/api/admin/rooms/{{roomId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/rooms/:roomId (Invalid - room not found)
### Should return 404 Not Found
GET {{baseUrl}}/api/admin/rooms/99999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### POST /api/admin/rooms
### Create a new room
### Automatically creates inventory for next 60 days
POST {{baseUrl}}/api/admin/rooms
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "roomName": "Deluxe Suite",
  "roomType": "Suite",
  "quantity": 5,
  "roomSize": 45,
  "roomAmenities": "WiFi, TV, Mini Bar, Air Conditioning, Balcony"
}

###

### POST /api/admin/rooms (Minimal data)
### Create a room with minimal required fields
POST {{baseUrl}}/api/admin/rooms
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "roomName": "Standard Room",
  "roomType": "Standard",
  "quantity": 10
}

###

### PATCH /api/admin/rooms/:roomId
### Update room information
### You can update any combination of fields
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "roomName": "Updated Deluxe Suite",
  "roomType": "Premium Suite",
  "quantity": 6,
  "roomSize": 50,
  "roomAmenities": "WiFi, TV, Mini Bar, Air Conditioning, Balcony, Jacuzzi"
}

###

### PATCH /api/admin/rooms/:roomId (Update name only)
### Update only the room name
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "roomName": "New Room Name"
}

###

### PATCH /api/admin/rooms/:roomId (Update quantity only)
### Update only the room quantity
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "quantity": 8
}

###

### DELETE /api/admin/rooms/:roomId
### Delete a room
### Note: This also deletes all associated inventory
DELETE {{baseUrl}}/api/admin/rooms/{{roomId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### ROOM PHOTOS
###############################################

### GET /api/admin/rooms/:roomId/photos
### Get all photos for a room
GET {{baseUrl}}/api/admin/rooms/{{roomId}}/photos
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### POST /api/admin/rooms/:roomId/photos
### Add photos to a room
### Note: This requires multipart/form-data with files
### Use a REST client that supports file uploads (Postman, Insomnia, etc.)
### Max 30 files per request
POST {{baseUrl}}/api/admin/rooms/{{roomId}}/photos
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Cookie: connect.sid={{sessionCookie}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="room1.jpg"
Content-Type: image/jpeg

< ./path/to/room1.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="room2.jpg"
Content-Type: image/jpeg

< ./path/to/room2.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="hotelId"

{{hotelId}}
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### DELETE /api/admin/rooms/:roomId/photos
### Delete photos from a room
### Provide array of photo URLs to delete
DELETE {{baseUrl}}/api/admin/rooms/{{roomId}}/photos
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "photoUrls": [
    "https://res.cloudinary.com/your-cloud/image/upload/v123/room1.jpg",
    "https://res.cloudinary.com/your-cloud/image/upload/v123/room2.jpg"
  ]
}

###

###############################################
### ROOM INVENTORY
###############################################

### GET /api/admin/rooms/:roomId/inventory
### Get room inventory (availability and pricing)
### Query params: startDate (optional), endDate (optional)
GET {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/rooms/:roomId/inventory (With date range)
### Get room inventory for a specific date range
GET {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory?startDate=2026-01-01&endDate=2026-01-31
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### PATCH /api/admin/rooms/:roomId/inventory
### Update room inventory
### Updates pricing and availability for specific dates
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "2026-01-15",
      "pricePerNight": 150,
      "status": "open",
      "totalReserved": 0
    },
    {
      "date": "2026-01-16",
      "pricePerNight": 175,
      "status": "open",
      "totalReserved": 0
    },
    {
      "date": "2026-01-17",
      "pricePerNight": 200,
      "status": "closed",
      "totalReserved": 0
    }
  ]
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Update price only)
### Update only the price for specific dates
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "2026-01-20",
      "pricePerNight": 180
    },
    {
      "date": "2026-01-21",
      "pricePerNight": 180
    }
  ]
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Update status only)
### Update only the status for specific dates
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "2026-01-25",
      "status": "closed"
    }
  ]
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Update reserved count)
### Update the reserved count for specific dates
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "2026-01-15",
      "totalReserved": 2
    }
  ]
}

###

###############################################
### AUTHENTICATION TEST
###############################################

### GET /api/admin/rooms (Unauthenticated)
### Should return 401 Unauthorized if not authenticated
GET {{baseUrl}}/api/admin/rooms?hotelId={{hotelId}}
Content-Type: {{contentType}}

###

### GET /api/admin/rooms (Unauthorized - not hotel owner)
### Should return 403 Forbidden if not hotel owner
GET {{baseUrl}}/api/admin/rooms?hotelId=99999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### VALIDATION ERROR EXAMPLES
###############################################

### GET /api/admin/rooms (Missing hotelId)
### Should return 400 Bad Request
GET {{baseUrl}}/api/admin/rooms
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### POST /api/admin/rooms (Missing required fields)
### Should return 400 Bad Request
POST {{baseUrl}}/api/admin/rooms
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}}
}

###

### POST /api/admin/rooms (Invalid quantity)
### Should return 400 Bad Request
POST {{baseUrl}}/api/admin/rooms
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "roomName": "Test Room",
  "roomType": "Standard",
  "quantity": 0
}

###

### POST /api/admin/rooms (Invalid quantity - negative)
### Should return 400 Bad Request
POST {{baseUrl}}/api/admin/rooms
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "hotelId": {{hotelId}},
  "roomName": "Test Room",
  "roomType": "Standard",
  "quantity": -1
}

###

### PATCH /api/admin/rooms/:roomId (Empty body)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

### DELETE /api/admin/rooms/:roomId/photos (Missing photoUrls)
### Should return 400 Bad Request
DELETE {{baseUrl}}/api/admin/rooms/{{roomId}}/photos
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

### DELETE /api/admin/rooms/:roomId/photos (Empty photoUrls array)
### Should return 400 Bad Request
DELETE {{baseUrl}}/api/admin/rooms/{{roomId}}/photos
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "photoUrls": []
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Missing inventories)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Empty inventories array)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": []
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Invalid date)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "invalid-date",
      "pricePerNight": 150
    }
  ]
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Invalid status)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "2026-01-15",
      "status": "invalid_status"
    }
  ]
}

###

### PATCH /api/admin/rooms/:roomId/inventory (Negative price)
### Should return 400 Bad Request
PATCH {{baseUrl}}/api/admin/rooms/{{roomId}}/inventory
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "inventories": [
    {
      "date": "2026-01-15",
      "pricePerNight": -10
    }
  ]
}

###

###############################################
### RESPONSE FORMAT EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": [ ... ]  // Array of rooms
### }
###
### For single room:
### {
###   "data": {
###     "room_id": 1,
###     "hotel_id": 1,
###     "room_name": "Deluxe Suite",
###     "room_type": "Suite",
###     "quantity": 5,
###     "room_size": 45,
###     "room_amenities": "WiFi, TV, Mini Bar",
###     "image_urls": "[...]"
###   }
### }
###
### For room inventory:
### {
###   "data": {
###     "roomId": 1,
###     "inventories": [ ... ],
###     "statistics": {
###       "totalDays": 30,
###       "averagePrice": 150.50,
###       "totalReserved": 10,
###       "totalInventory": 50,
###       "occupancyRate": 20.00
###     },
###     "period": {
###       "startDate": "2026-01-01",
###       "endDate": "2026-01-31"
###     }
###   }
### }
###
### Expected Error Response Format:
### {
###   "success": false,
###   "message": "Error description",
###   "code": "ERROR_CODE"
### }
