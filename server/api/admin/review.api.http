### Admin Review API Test Requests
### RESTful API endpoints for admin review management
### 
### Prerequisites:
### 1. Make sure the server is running (default: http://localhost:3000)
### 2. You need to be authenticated as admin/partner (session cookie required)
### 3. For authentication, login via /api/auth endpoints with partner role

@baseUrl = http://localhost:3000
@contentType = application/json

### Variables (update these with your actual values)
@hotelId = 1
@reviewId = 1
@sessionCookie = your-session-cookie-here

###############################################
### REVIEWS RESOURCE
###############################################

### GET /api/admin/reviews
### Get all reviews for a specific hotel
### Query params: hotelId (required), hasReply (optional), minRating (optional), maxRating (optional), page (default: 1), limit (default: 20)
GET {{baseUrl}}/api/admin/reviews?hotelId={{hotelId}}&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/reviews (Without replies)
### Get reviews that don't have replies yet
GET {{baseUrl}}/api/admin/reviews?hotelId={{hotelId}}&hasReply=false&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/reviews (With replies)
### Get reviews that have replies
GET {{baseUrl}}/api/admin/reviews?hotelId={{hotelId}}&hasReply=true&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/reviews (Filter by rating - 4 stars and above)
### Get reviews with rating 4 or higher
GET {{baseUrl}}/api/admin/reviews?hotelId={{hotelId}}&minRating=4&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/reviews (Filter by rating range)
### Get reviews with rating between 3 and 5
GET {{baseUrl}}/api/admin/reviews?hotelId={{hotelId}}&minRating=3&maxRating=5&page=1&limit=20
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/reviews/:reviewId
### Get a specific review by ID with user info and criteria
GET {{baseUrl}}/api/admin/reviews/{{reviewId}}
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### GET /api/admin/reviews/:reviewId (Invalid - review not found)
### Should return 404 Not Found
GET {{baseUrl}}/api/admin/reviews/99999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### REVIEW REPLIES
###############################################

### POST /api/admin/reviews/:reviewId/reply
### Reply to a review
### Note: Review must not already have a reply
POST {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": "Thank you for your feedback! We're glad you enjoyed your stay. We hope to see you again soon!"
}

###

### POST /api/admin/reviews/:reviewId/reply (Short reply)
### Add a short reply
POST {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": "Thank you!"
}

###

### PATCH /api/admin/reviews/:reviewId/reply
### Update an existing reply
### Note: Review must already have a reply
PATCH {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": "Updated reply: Thank you for your detailed feedback! We appreciate your comments and will use them to improve our services."
}

###

### DELETE /api/admin/reviews/:reviewId/reply
### Delete a reply to a review
### Note: Review must have a reply to delete
DELETE {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### AUTHENTICATION TEST
###############################################

### GET /api/admin/reviews (Unauthenticated)
### Should return 401 Unauthorized if not authenticated
GET {{baseUrl}}/api/admin/reviews?hotelId={{hotelId}}
Content-Type: {{contentType}}

###

### GET /api/admin/reviews (Unauthorized - not hotel owner)
### Should return 403 Forbidden if not hotel owner
GET {{baseUrl}}/api/admin/reviews?hotelId=99999
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### VALIDATION ERROR EXAMPLES
###############################################

### GET /api/admin/reviews (Missing hotelId)
### Should return 400 Bad Request
GET {{baseUrl}}/api/admin/reviews
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

### POST /api/admin/reviews/:reviewId/reply (Missing reply)
### Should return 400 Bad Request
POST {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
}

###

### POST /api/admin/reviews/:reviewId/reply (Empty reply)
### Should return 400 Bad Request
POST {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": ""
}

###

### POST /api/admin/reviews/:reviewId/reply (Reply too long)
### Should return 400 Bad Request (max 2000 characters)
POST {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": "Very long reply that exceeds 2000 characters..."
}

###

### POST /api/admin/reviews/:reviewId/reply (Reply already exists)
### Should return 400 Bad Request - use PATCH instead
POST {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": "This will fail if review already has a reply"
}

###

### PATCH /api/admin/reviews/:reviewId/reply (No reply exists)
### Should return 400 Bad Request - use POST instead
PATCH {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

{
  "reply": "This will fail if review doesn't have a reply"
}

###

### DELETE /api/admin/reviews/:reviewId/reply (No reply exists)
### Should return 400 Bad Request
DELETE {{baseUrl}}/api/admin/reviews/{{reviewId}}/reply
Content-Type: {{contentType}}
Cookie: connect.sid={{sessionCookie}}

###

###############################################
### RESPONSE FORMAT EXAMPLES
###############################################

### Expected Success Response Format:
### {
###   "data": {
###     "reviews": [ ... ],
###     "statistics": {
###       "totalReviews": 50,
###       "reviewsWithReply": 30,
###       "reviewsWithoutReply": 20,
###       "averageRating": 4.5,
###       "ratingDistribution": {
###         "5": 20,
###         "4": 15,
###         "3": 10,
###         "2": 3,
###         "1": 2
###       }
###     },
###     "pagination": {
###       "total": 50,
###       "page": 1,
###       "totalPages": 3,
###       "limit": 20
###     }
###   }
### }
###
### For single review:
### {
###   "data": {
###     "review_id": 1,
###     "user_id": 123,
###     "hotel_id": 1,
###     "rating": 5,
###     "comment": "Great hotel!",
###     "reply": "Thank you!",
###     "user": {
###       "user_id": 123,
###       "username": "john_doe",
###       "email": "john@example.com"
###     },
###     "criteria": [
###       {
###         "criteria_name": "Cleanliness",
###         "score": 5
###       }
###     ]
###   }
### }
###
### Expected Error Response Format:
### {
###   "success": false,
###   "message": "Error description",
###   "code": "ERROR_CODE"
### }
